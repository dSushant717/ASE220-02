<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>A pet shelter</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <h1 class="text-center"><span id="text-one">A</span> <span id="text-two">pet</span> <span id="text-three">shelter</span></h1>
        <div class="row d-flex justify-content-evenly cover" id="pet-cards">
            
        </div>
        <div id="lbutton">
            <button id="loadMoreBtn" class="btn btn-primary mt-3">Load More</button>
            <p id="endMessage" class="text-muted mt-3" style="display: none;">That's the end of the cards.</p>
        </div>
        
    </div>

    <script src="data.json"></script>
    <script>
        let currentPage = 1;
        const cardsPerPage = 9;
        let pets;
        fetch("data.json")
            .then(response => response.json())
            .then(data => {
                pets = data;
                renderPage(currentPage);
            })
            .catch(error => console.error('Error fetching data:', error));

            
        
        function createPetCards(pets) {
            const container = document.getElementById('pet-cards');
            const dogEmoji = "\u{1F436}"; 
            const catEmoji = "\u{1F431}";

            for (let i = 0; i < pets.length; i++) {
                let pet = pets[i];
                let borderColorClass = pet.sex === 'Male' ? 'border-info' : 'signorina-border';
                let buttonColorClass = pet.sex === 'Male' ? 'btn-info': 'signorina-button';
                let emoji = pet.type === 'Dog' ? dogEmoji : catEmoji;
                let boxClass = pet.sex === 'Male' ? 'badge bg-primary' : 'badge signorina-background';
                let boxText = pet.sex === 'Male' ? 'M' : 'F';

                let card = `<div class="card border-5 col-sm-12 col-lg-4 align-self-center m-4 ${borderColorClass}" style="width: 18rem;">
                    <img src="${pet.image}" class="card-img-top" alt="${pet.breed}">
                    <div class="card-body">
                        <h5 class="card-title">${pet.name}</h5>
                        <p class="card-text">
                        <ul>
                            <li>Breed: ${pet.breed}</li>
                            <li>Type: ${pet.type} ${emoji}</li>
                            <li>Age: ${pet.age}</li>
                            <li>Gender: ${pet.sex} <span class="${boxClass}">${boxText}</span></li>
                        </ul>
                        </p>
                        <a href="animal_details.html?index=${i}" class="btn ${buttonColorClass}">Details Page</a>
                    </div>
                </div>`;
                container.innerHTML += card;
            }
        }
        function renderPage(page) {
            const startIdx = (page - 1) * cardsPerPage;
            const endIdx = startIdx + cardsPerPage;
            const displayedPets = pets.slice(startIdx, endIdx);
            createPetCards(displayedPets);

            if (endIdx >= pets.length) {
                disableLoadMoreButton();
            }
        }
        function disableLoadMoreButton() {
            const loadMoreBtn = document.getElementById('loadMoreBtn');
            const endMessage = document.getElementById('endMessage');

            loadMoreBtn.disabled = true;
            endMessage.style.display = 'block';
        }
        document.getElementById('loadMoreBtn').addEventListener('click', () => {
            currentPage++;
            renderPage(currentPage);
        });

        
    </script>
    
    

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
        crossorigin="anonymous"></script>
</body>
</html>
